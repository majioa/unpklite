READ_FILE_STRING	PROC	NEAR
	;DS:SI-STRING
	;AH-COMMAND SYMBOL
	CMP	BYTE PTR DS:[SI],0
	JZ	READ_FILE_STRING_NONE_LINE
	INC	SI
	PUSH	SI
	MOV	BYTE PTR CS:[READ_FILE_STRING_FLAG_],0
	XOR	CX,CX
READ_FILE_STRING_1:
	LODSB
	CMP	AL,' '
	JE	READ_FILE_STRING_NEXT_FILE
	CMP	AL,AH
	JE	READ_FILE_STRING_NONE_FILE
	CMP	AL,0DH
	JE	READ_FILE_STRING_EXIT
	AND	CS:[READ_FILE_STRING_FLAG_],01111111B
	OR	CS:[READ_FILE_STRING_FLAG_],01000000B
	JMP	SHORT	READ_FILE_STRING_1
READ_FILE_STRING_EXIT:
	TEST	CS:[READ_FILE_STRING_FLAG_],10000000B
	JNZ	READ_FILE_STRING_EXIT_1
	INC	CX
	MOV	BYTE PTR DS:[SI-1],0
READ_FILE_STRING_EXIT_1:
	POP	SI
	CLC
	RET
READ_FILE_STRING_NEXT_FILE:
	TEST	CS:[READ_FILE_STRING_FLAG_],01000000B
	JZ	READ_FILE_STRING_NEXT_FILE_1
	INC	CX
READ_FILE_STRING_NEXT_FILE_1:
	AND	CS:[READ_FILE_STRING_FLAG_],10111111B
	OR	CS:[READ_FILE_STRING_FLAG_],10000000B
	MOV	BYTE PTR DS:[SI-1],0
	JMP	SHORT	READ_FILE_STRING_1
READ_FILE_STRING_NONE_LINE:
	MOV	AX,1
	STC
	RET
READ_FILE_STRING_NONE_FILE:
	MOV	AX,2
	POP	SI
	STC
	RET
READ_FILE_STRING_FLAG_	DB	0
ENDP
